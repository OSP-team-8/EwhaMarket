{% extends "index.html" %}
{% block section %}
<link rel="stylesheet" href="{{ url_for('static', filename='review.css') }}">

<form method="get">
    <div class="first_line">
        <label id="review_all">상품 리뷰 | {{ total }}개</label>
    </div>

    <div class="search_group">
        <label for="search">검색</label>
        <input type="search" name="q" id="search" placeholder="검색어를 입력하세요">
        <button class="search__btn" type="submit">검색</button>
    </div>
</form>


    <!-- ✅ 실제 리뷰 카드들 -->
    <div class="review_container">
        {% if reviews|length == 0 %}
            <p>등록된 리뷰가 없습니다.</p>
        {% endif %}

        {% for r in reviews %}
        <div class="review_set">
            <label class="review_title">{{ r.title }}</label>
              <a href="{{ url_for('review_detail', review_id=r.id) }}" class="review_link">
                {% if r.img_path %}
                    <img src="{{ url_for('static', filename='images/' ~ r.img_path) }}">
                {% else %}
                    <!-- 이미지 없을 때 기본 이미지 쓰고 싶으면 여기 수정 -->
                    <img src="{{ url_for('static', filename='images/공기청정기.png') }}">
                {% endif %}
            </a>
        </div>
        {% endfor %}
    </div>

    <!-- ✅ 페이지네이션 -->
    <nav class="pagination" aria-label="페이지네비게이션">
        {% if page > 1 %}
            <a class="page-btn" href="{{ url_for('view_review', page=page-1) }}">〈 이전</a>
        {% else %}
            <span class="page-btn">〈 이전</span>
        {% endif %}

        {% for p in range(1, page_count + 1) %}
            {% if p == page %}
                <span class="page is-active">{{ p }}</span>
            {% else %}
                <a class="page" href="{{ url_for('view_review', page=p) }}">{{ p }}</a>
            {% endif %}
        {% endfor %}

        {% if page < page_count %}
            <a class="page-btn" href="{{ url_for('view_review', page=page+1) }}">다음 〉</a>
        {% else %}
            <span class="page-btn">다음 〉</span>
        {% endif %}
    </nav>

</form>
{% endblock section %}
