{% extends "index.html" %}

{% block head %}
  <title>ì°œ | ì´í™” ë§ˆì¼“</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
{% endblock head %}

{% block section %}
<section class="wishlist-wrap">

  <h2 class="wishlist-title">
    ë‚˜ì˜ ì°œ
    {% if total is defined %}
      <span style="font-size: 0.9rem; color: #666;"> (ì´ {{ total }}ê°œ)</span>
    {% endif %}
  </h2>

  <table class="wishlist-table">
    <thead>
      <tr>
        <th>#</th>
        <th>ìƒí’ˆ ì‚¬ì§„</th>
        <th>ìƒí’ˆ ì´ë¦„</th>
        <th>ê°€ê²©</th>
        <th>í–‰ë™</th>
      </tr>
    </thead>

    <tbody>
      {% if items %}
        {% for p in items %}
          <tr>
            <td>{{ (page - 1) * 5 + loop.index }}</td>  {# ì „ì²´ ê¸°ì¤€ ìˆœë²ˆ #}
            <td>
              {% if p.thumb %}
                <img src="{{ url_for('static', filename=p.thumb) }}" class="wishlist-img">
              {% else %}
                <span style="color:#999;">ì´ë¯¸ì§€ ì—†ìŒ</span>
              {% endif %}
            </td>
            <td>
              <a href="{{ url_for('product_detail', pid=p.id) }}">
                {{ p.name }}
              </a>
            </td>
            <td>KRW {{ "{:,}".format(p.price) }}</td>
            <td class="wishlist-actions">
              <button class="btn-ewha small-btn" type="button">ì¥ë°”êµ¬ë‹ˆ ë‹´ê¸°</button>

              <form method="post"
                    action="{{ url_for('toggle_wish', pid=p.id) }}"
                    style="display:inline;">
                <button class="btn-ewha small-btn" type="submit">ì°œ ì·¨ì†Œ</button>
              </form>

              <a class="btn-ewha small-btn"
                 href="{{ url_for('view_review', q=p.name) }}">
                ë¦¬ë·° ì¡°íšŒ
              </a>
            </td>
          </tr>
        {% endfor %}
      {% else %}
        <tr>
          <td colspan="5" style="text-align:center; padding: 2rem 0;">
            ì°œí•œ ìƒí’ˆì´ ì—†ìŠµë‹ˆë‹¤.
          </td>
        </tr>
      {% endif %}
    </tbody>
  </table>

  {# ğŸ”¹ í˜ì´ì§• ë„¤ë¹„ê²Œì´ì…˜ #}
  {% if page_count %}
  <nav class="wishlist-page" aria-label="í˜ì´ì§€ ë„¤ë¹„ê²Œì´ì…˜">
    {# ì´ì „ ë²„íŠ¼ #}
    {% if page > 1 %}
      <a href="{{ url_for('view_wishlist', page=page-1) }}">&lt; ì´ì „</a>
    {% else %}
      <span class="page disabled">&lt; ì´ì „</span>
    {% endif %}

    {# í˜ì´ì§€ ë²ˆí˜¸ë“¤ #}
    {% for p in range(1, page_count + 1) %}
      {% if p == page %}
        <a href="{{ url_for('view_wishlist', page=p) }}" class="page active">{{ p }}</a>
      {% else %}
        <a href="{{ url_for('view_wishlist', page=p) }}" class="page">{{ p }}</a>
      {% endif %}
    {% endfor %}

    {# ë‹¤ìŒ ë²„íŠ¼ #}
    {% if page < page_count %}
      <a href="{{ url_for('view_wishlist', page=page+1) }}">ë‹¤ìŒ &gt;</a>
    {% else %}
      <span class="page disabled">ë‹¤ìŒ &gt;</span>
    {% endif %}
  </nav>
  {% endif %}

</section>
{% endblock section %}
