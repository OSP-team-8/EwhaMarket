{% extends "index.html" %}

{% block head %}
  <title>상품 조회 상세 | 이화 마켓</title>
  <link rel="stylesheet"
        href="{{ url_for('static', filename='product_detail.css') }}?v={{ range(1,999999)|random }}">
{% endblock head %}

{% block section %}
<h2 class="page-title">상품 조회 상세</h2>

<div class="detail">
  <!-- [BOX-LEFT] 대표사진 묶음 -->
  <section class="detail__box detail__box--left">
    <div class="label-box label-photo">대표사진</div>

    {% if product.thumb %}
      <img class="detail__img"
           src="{{ url_for('static', filename=product.thumb) }}"
           alt="{{ product.name }}">
    {% else %}
      <div class="detail__img detail__img--empty">이미지 없음</div>
    {% endif %}
  </section>

  <!-- [BOX-RIGHT] 정보/찜/목록 묶음 -->
  <section class="detail__box detail__box--right">
    <!-- 상단 찜하기 바 -->
    <div class="right-bar">
      <div class="wish">
        <span>찜하기</span> |

        <!-- 찜하기 폼 -->
        <form method="post"
              action="{{ url_for('toggle_wish', pid=product.id) }}"
              style="display:inline;">
          <button
            class="heart{% if liked %} is-liked{% endif %}"
            type="submit"
            aria-label="찜하기">
            {{ '♥' if liked else '♡' }}
          </button>
        </form>

      </div>
    </div>

    <!-- 정보 행들 -->
    <div class="row row--name">
      <div class="label-box">상품명</div>
      <div class="value-box">{{ product.name }}</div>
    </div>

    <div class="row">
      <div class="label-box">가격</div>
      <div class="value-box">{{ "{:,}".format(product.price) }}원</div>
    </div>

    <div class="row">
      <div class="label-box">상태</div>
      <div class="value-box">{{ product.status or "-" }}</div>
    </div>

    <div class="row">
      <div class="label-box">설명</div>
      <div class="value-box">{{ product.desc or "-" }}</div>
    </div>

    <div class="row">
      <div class="label-box">판매자</div>
      <div class="value-box">{{ product.seller or "-" }}</div>
    </div>

    <div class="row">
      <div class="label-box">판매자 전화번호</div>
      <div class="value-box">{{ product.phone or "-" }}</div>
    </div>

    <div class="row">
      <div class="label-box">지역</div>
      <div class="value-box">{{ product.region or "-" }}</div>
    </div>

        <!-- 목록 / 리뷰 등록 버튼 (오른쪽 정렬) -->
    <div class="actions">
      <!-- 리뷰 등록 버튼: 현재 상품명을 가지고 리뷰 작성 페이지로 이동 -->
      <a class="review-btn"
         href="{{ url_for('reg_review_init', name=product.name) }}">
        리뷰 등록
      </a>

      <!-- 목록으로 돌아가기 버튼 -->
      <a class="back-btn"
        href="{{ url_for('view_list') }}">
        목록으로 돌아가기
      </a>
    </div>

  </section>
</div>
{% endblock section %}
