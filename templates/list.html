{% extends "index.html" %}

{% block head %}
  <title>ìƒí’ˆ ì¡°íšŒ | ì´í™” ë§ˆì¼“</title>
  <!-- list ì „ìš© CSS (static/list.css ìœ„ì¹˜) -->
  <link rel="stylesheet" href="{{ url_for('static', filename='list.css') }}">
{% endblock head %}

{% block section %}
<div class="container">

  <!-- ìƒë‹¨: ì œëª©/ê°œìˆ˜ + ê²€ìƒ‰ + ìµœì‹ ìˆœ -->
  <header class="product-header">
    <h2 class="product-header__title">
      ìƒí’ˆ ì¡°íšŒ | {{ products|length }}ê°œ
    </h2>

    <form class="search" method="get" action="{{ url_for('view_list') }}">
      <input
        class="search__bar"
        type="text"
        name="q"
        placeholder="ê²€ìƒ‰ì–´ë¥¼ ì…ë ¥í•˜ì„¸ìš”"
        value="{{ request.args.get('q','') }}"
        aria-label="ê²€ìƒ‰ì–´"
      />
      <button class="search__btn" type="submit" aria-label="ê²€ìƒ‰">ğŸ”</button>
      <span class="search__sort">ìµœì‹ ìˆœ</span>
    </form>
  </header>

  <!-- ìƒí’ˆ ì¹´ë“œ ê·¸ë¦¬ë“œ -->
  <section class="product-grid">
    {% if products %}
      {% for p in products %}
        <article class="card" data-pid="{{ p.id }}">
          <div class="card__namebar">
            <span class="card__name" title="{{ p.name }}">{{ p.name }}</span>
            <!-- data-likedëŠ” ì´ˆê¸° ìƒíƒœ í‘œì‹œìš©(ë¡œì»¬ìŠ¤í† ë¦¬ì§€ë¡œ ìµœì¢… ë°˜ì˜) -->
            <button
              class="card__heart"
              type="button"
              aria-label="ì°œí•˜ê¸°"
              data-pid="{{ p.id }}"
              data-liked="false">â™¡</button>
          </div>

          <a class="card__imageLink" href="{{ url_for('product_detail', pid=p.id) }}">
            {% if p.thumb %}
              <div class="card__image"
                  style="background-image:url('{{ url_for('static', filename=p.thumb) }}');">
              </div>
            {% else %}
              <div class="card__image card__image--empty">ì´ë¯¸ì§€ ì—†ìŒ</div>
            {% endif %}
          </a>
        </article>
      {% endfor %}
    {% else %}
      <p class="empty">ë“±ë¡ëœ ìƒí’ˆì´ ì—†ìŠµë‹ˆë‹¤.</p>
    {% endif %}
  </section>

  <!-- (ë°ëª¨) í˜ì´ì§€ ë„¤ë¹„ê²Œì´ì…˜ - ì•„ì§ ì„œë²„ í˜ì´ì§• ì „ì´ë¼ ë§í¬ëŠ” # -->
  <nav class="pagination" aria-label="í˜ì´ì§€ë„¤ë¹„ê²Œì´ì…˜">
    <a class="page-btn" href="#">ã€ˆ ì´ì „</a>
    <a class="page is-active" href="#">1</a>
    <a class="page" href="#">2</a>
    <a class="page" href="#">3</a>
    <a class="page-btn" href="#">ë‹¤ìŒ ã€‰</a>
  </nav>
</div>

<!-- list ì „ìš© JS (í•˜íŠ¸ í† ê¸€: localStorageë¡œ ìœ ì§€) -->
<script defer src="{{ url_for('static', filename='product.js') }}"></script>
{% endblock section %}
